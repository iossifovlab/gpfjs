<ng-container *ngIf="!loading">
  <div *ngIf="dataset$ | async as dataset" class="container">
    <div id="edit-container" *ngIf="!editMode">
      <div *ngIf="!dataset.description" id="empty-description">
        <span>Empty description. Write a description using the pencil button to the right.</span>
      </div>
      <div id="edit-description">
        <markdown id="markdown-id" [data]="dataset.description || ''"></markdown>
        <div *ngIf="!editMode && isDescriptionEditable">
          <div style="position: relative">
            <span
              *ngIf="('' | userInfo)?.isAdministrator"
              (click)="edit()"
              id="edit-icon"
              class="material-symbols-outlined"
              title="Edit"
              >edit</span
            >
          </div>
        </div>

        <div *ngIf="editMode">
          <div class="editor">
            <angular-markdown-editor textareaId="editor1" [options]="editorOptions" [(ngModel)]="editorText">
            </angular-markdown-editor>
            <button (click)="save()" id="save-btn" class="btn btn-success" title="Save (ctrl+enter)">Save</button>
            <button (click)="close()" id="close-btn" class="btn" title="Close">Close</button>
          </div>
        </div>

        <hr *ngIf="!dataset.description && !editMode" style="margin-top: 5px" />
      </div>
    </div>

    <div *ngIf="editMode">
      <div class="editor">
        <angular-markdown-editor
          textareaId="editor1"
          [options]="editorOptions"
          [(ngModel)]="editorText"
          (onChange)="togglePreview()"
          (onShow)="disablePreviewOnLoad(!dataset.description)">
        </angular-markdown-editor>
        <button (click)="save()" id="save-button" class="btn btn-success" title="Save (ctrl+enter)">Save</button>
        <button (click)="close()" id="close-button" class="btn" title="Close">Close</button>
      </div>
    </div>

    <hr *ngIf="!dataset.description && !editMode" style="margin-top: 5px" />
  </div>
</ng-container>
