<div ngbDropdown *ngIf="(userInfo$ | async)?.email" autoClose="outside" placement="top">
  <button
    (click)="focusNameInput(); openDropdown(true); copiedTooltip.close()"
    [disabled]="disabled"
    id="save-query-dropdown-button"
    class="btn btn-default"
    ngbDropdownToggle>Query</button>

  <div id="save-query-dropdown" ngbDropdownMenu aria-labelledby="dropdownQuerySave">
    <p>Share</p>

    <div id="share-url-div">
      <input #link readonly type="disabled" (click)="link.select()" value="{{ url }}" spellcheck="false" />
      <div [cdkCopyToClipboard]="url" (click)="openCopiedTooltip(); link.select()">
        <span
          ngbTooltip="Copied!"
          [autoClose]="false"
          triggers="manual"
          #copiedTooltip="ngbTooltip"
          class="clone-icon"
          [style.background-image]="'url(' + imgPathPrefix + 'clone-regular.svg)'"></span>
      </div>
    </div>

    <form id="save-form" (ngSubmit)="saveUserQuery(nameInput.value, descInput.value)" #queryStorageForm="ngForm">
      <p style="border-top: 1px solid rgb(211, 211, 211); padding-top: 11px">Save</p>

      <div style="padding-left: 8px">
        <div style="margin-bottom: 8px">
          <label for="name">Name</label>
          <input
            #nameInput
            type="text"
            class="form-control"
            id="name"
            required
            autocomplete="off"
            maxlength="256"
            spellcheck="false" />
        </div>

        <div style="margin-bottom: 16px">
          <label for="description">Description</label>
          <textarea
            #descInput
            class="form-control"
            id="description"
            maxlength="1024"
            style="resize: none; height: 100px"></textarea>
        </div>

        <button id="save-link-button" type="submit" class="btn btn-success" [disabled]="!nameInput.value">Save</button>
      </div>
    </form>
  </div>
</div>
