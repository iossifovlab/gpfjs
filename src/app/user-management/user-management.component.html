<div class="form-block">
  <div class="card">
    <ul ngbNav #nav="ngbNav" class="navbar bg-light nav-pills" style="justify-content: flex-start">
      <div class="nav-title-custom">
        Management
      </div>

      <li ngbNavItem id="users">
        <a ngbNavLink>Users</a>
        <ng-template ngbNavContent>
          <div class="row justify-content-between">
            <div class="col-8 btn-toolbar">
              <div class="input-group search-field mr-3">
                <span class="input-group-addon">
                  <i class="fa fa-search" aria-hidden="true"></i>
                </span>
                <input #searchTerm (keyup)="search(searchTerm.value)" type="text" class="form-control" placeholder="Search groups" [ngModel]="input$ | async" />
              </div>
              <div class="btn-group pull-right" role="group">
                <button
                  ngbTooltip="Add or remove a group from the selected users"
                  container="body"
                  id="btnGroupDrop1"
                  type="button"
                  class="btn btn-outline-secondary dropdown-toggle"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false">
                    Bulk edit
                </button>
                <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                  <button
                    class="dropdown-item"
                    [disabled]="selectedUsers(users$ | async).length === 0"
                    [routerLink]="['users', 'add-group']"
                    [queryParams]="{ user_ids: getUserIds(users$ | async) }">Add group</button>
                  <button
                    class="dropdown-item"
                    [disabled]="selectedUsers(users$ | async)?.length === 0"
                    [routerLink]="['users', 'remove-group']"
                    [queryParams]="{ user_ids: getUserIds(users$ | async) }">Remove group</button>
                </div>
              </div>
            </div>
            <div class="col-4">
              <a [routerLink]="['users', 'create']" class="btn btn-primary pull-right">Create user</a>
            </div>
          </div>

          <gpf-users-table
            [users]="users$ | async">
            </gpf-users-table>
        </ng-template>
      </li>

      <li ngbNavItem id="groups">
        <a ngbNavLink>Groups</a>
        <ng-template ngbNavContent>
          <gpf-groups-table></gpf-groups-table>
        </ng-template>
      </li>
      <li ngbNavItem id="datasets">
        <a ngbNavLink>Datasets</a>
        <ng-template ngbNavContent>
          <gpf-datasets-table></gpf-datasets-table>
        </ng-template>
      </li>
    </ul>
    <div [ngbNavOutlet]="nav" class="card-block"></div>
  </div>
</div>
