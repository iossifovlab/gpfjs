<div class="table-container">
  <div class="header main-header">
    <ng-container *ngTemplateOutlet="recursiveListTmpl; context: { columns: config.columns, headerDepth: 0 }"></ng-container>
  </div>

  <ng-template #recursiveListTmpl let-columns="columns" let-headerDepth="headerDepth">
    <div
      class="header-cell"
      *ngFor="let column of columns"
      [ngStyle]="{ 'grid-template-rows': column.columns.length > 0 ? 'auto auto' : 'auto' }">
      <div class="cell header-title-cell"
        [ngClass]="{ leaf: column.columns.length === 0 }"
        [ngStyle]="{ 'top': headerDepth + 'px' }">
        {{ column.id }}
      </div>

      <div class="header" *ngIf="column.columns.length > 0">
        <ng-container *ngTemplateOutlet="recursiveListTmpl; context: { columns: column.columns, headerDepth: headerDepth + 25 }"></ng-container>
      </div>
      <ng-container *ngIf="column.columns.length === 0">
        <div class="cell" *ngFor="let row of rows">
          {{ row[column.index] }}
        </div>
      </ng-container>
    </div>
  </ng-template>
</div>
