<div class="table-toolbar">
  <input
    #credentialNameBox
    placeholder="New credential"
    autocomplete="off"
    id="credential-name-box"
    class="search-input form-control my-0 py-1"
    type="search"
    pattern=".{3,}"
    required
    spellcheck="false" />
  <button id="create-credential-button" class="btn btn-primary" (click)="createCredential(credentialNameBox.value)"
    >Create</button
  >
</div>

<div *ngIf="creationError" class="creation-error alert alert-danger">{{ creationError }}</div>

<ng-template #credentialModal let-modal id="credential-modal">
  <div id="credential-modal-title-wrapper">
    <div id="credential-modal-title">Credentials: shown only once, copy before closing.</div>
    <button
      [cdkCopyToClipboard]="temporaryShownCredentials"
      title="Copy credentials"
      id="copy-credentials-button"
      class="action-button">
      <i class="fa fa-clone" aria-hidden="true"></i>
      Copy
    </button>
  </div>
  <div class="card-block" id="credential-modal-content">
    {{ temporaryShownCredentials }}
  </div>
</ng-template>

<div class="grid-container" *ngIf="credentials">
  <div class="grid-header">Name</div>
  <div class="grid-header">Client Id</div>
  <div class="grid-header">Client Secret</div>
  <div class="grid-header">Actions</div>
  <ng-container *ngFor="let credential of credentials">
    <div class="grid-cell" id="name-cell">{{ credential.name }}</div>

    <div class="grid-cell" id="client-id-cell">{{ credential.clientId }}</div>

    <div class="grid-cell" id="client-secret-cell">{{ credential.clientSecret }}</div>

    <div class="grid-cell" id="actions-cell">
      <gpf-confirm-button
        [attr.id]="credential.name + '-delete-credential-button'"
        (clicked)="deleteCredential(credential.name)"
        confirmText="Delete"
        title="Delete credential"
        [message]="'Credential \'' + credential.name + '\' will be deleted. This action is irrevertible!'"
        [iconStyle]="['fa', 'fa-lg', 'fa-times']">
      </gpf-confirm-button>
    </div>
  </ng-container>
</div>
