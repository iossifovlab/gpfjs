<div class="container">
  <gpf-genes-block></gpf-genes-block>
  <gpf-regions-block></gpf-regions-block>
  <gpf-genotype-block [dataset]="selectedDataset"></gpf-genotype-block>
  <gpf-study-filters-block *ngIf="selectedDataset?.genotypeBrowserConfig?.hasStudyFilters" [dataset]="selectedDataset">
  </gpf-study-filters-block>
  <gpf-genomic-scores-block></gpf-genomic-scores-block>
  <gpf-family-filters-block
    *ngIf="selectedDataset?.genotypeBrowserConfig?.hasFamilyFilters"
    [dataset]="selectedDataset"
    [genotypeBrowserState]="genotypeBrowserState">
  </gpf-family-filters-block>
  <gpf-person-filters-block
    *ngIf="selectedDataset?.genotypeBrowserConfig?.hasPersonFilters"
    [dataset]="selectedDataset"
    [genotypeBrowserState]="genotypeBrowserState">
  </gpf-person-filters-block>

  <gpf-unique-family-variants-filter></gpf-unique-family-variants-filter>

  <div class="form-block">
    <button
      class="btn btn-md btn-primary btn-right"
      id="download-button"
      (click)="onDownload()"
      [disabled]="disableQueryButtons">
       <span *ngIf="downloadInProgress">Downloading...</span>
       <span *ngIf="!downloadInProgress">Download</span>
    </button>
    <div class="button">
      <input
        type="button"
        [disabled]="disableQueryButtons"
        class="btn btn-md btn-primary"
        id="table-preview-button"
        value="Table Preview"
        (click)="tablePreview = true; submitQuery()" />
      <input
        *ngIf="selectedDataset?.genotypeBrowserConfig?.hasGraphicalPreview"
        type="button"
        class="btn btn-md btn-primary"
        value="Graphical Preview"
        (click)="tablePreview = false; submitQuery()" />
      <gpf-save-query [disabled]="disableQueryButtons" queryType="genotype"></gpf-save-query>
    </div>
  </div>
</div>
<div class="genotype-browser-results" *ngIf="genotypePreviewVariantsArray">
  <hr />
  <gpf-loading-spinner
    [loadingFinished]="loadingFinished"
    [count]="genotypePreviewVariantsArray.getVariantsCount(selectedDataset?.genotypeBrowserConfig?.maxVariantsCount)"
    [verboseMode]="true">
  </gpf-loading-spinner>

  <gpf-genotype-preview-table
    *ngIf="tablePreview"
    [columns]="selectedDataset?.genotypeBrowserConfig?.tableColumns"
    [genotypePreviewVariantsArray]="genotypePreviewVariantsArray"
    [legend]="legend">
  </gpf-genotype-preview-table>
</div>
