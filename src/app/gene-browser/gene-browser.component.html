<div style="padding: 30px;" *ngIf="selectedDataset">
  <div *ngIf="selectedDataset.accessRights">
    <div class="effect-card card">
      <div style="font-family: Roboto; font-weight: 500; border-bottom: none;" class="card-header card-title">Gene Symbols</div>
      <div class="card-block">
        <gpf-gene-symbol-with-search></gpf-gene-symbol-with-search>
        <div [hidden]="!showError" class="alert alert-danger" role="alert" style="display: inline-block; margin: 20px; margin-top: 0px; width: 45%">
          No such gene found!
        </div>

        <div style="padding: 0px 10px 10px 20px">
          <input (click)="hideResults = true" style="margin-right: 10px;" type="checkbox" id="coding-only-checkbox" [(ngModel)]="enableCodingOnly">
          <label for="coding-only-checkbox" style="user-select: none">Coding only</label>
        </div>
      </div>
    </div>

    <div style="margin-top: 15px">
      <input type="button" style="width: 75px" class="btn btn-md btn-primary" value="Go" (click)="submitGeneRequest()">
    </div>

    <div *ngIf="loadingFinished">
      <gpf-gene-browser-filters
        [summaryVariantsArray]="summaryVariantsArray"
        [selectedFrequencies]="selectedFrequencies"
        [selectedRegion]="selectedRegion"
        [enableCodingOnly]="enableCodingOnly"
        [selectedDatasetId]="selectedDatasetId"
        [selectedGene]="selectedGene"
        (filteredVariants)="updateFilteredSummaryAlleles($event)">
      </gpf-gene-browser-filters>
      <gpf-gene-plot
        [gene]="selectedGene"
        [variantsArray]="summaryVariantsArrayFiltered"
        [frequencyDomain]="[geneBrowserConfig.domainMin, geneBrowserConfig.domainMax]"
        [yAxisLabel]="geneBrowserConfig.frequencyName || geneBrowserConfig.frequencyColumn"
        [allVariantsCounts]="[summaryVariantsArray.totalSummaryAllelesCount, summaryVariantsArray.totalFamilyVariantsCount]"
        [condenseIntrons]="enableCodingOnly"
        (selectedRegion)="setSelectedRegion($event)"
        (selectedFrequencies)="setSelectedFrequencies($event)">
      </gpf-gene-plot>
      <div class="row">
        <div class="col-12" *ngIf="selectedGene">
          <form id="summary_download" (ngSubmit)="onSubmit($event)" action="{{ configService.baseUrl }}genotype_browser/query"
            method="post">
            <input name="queryData" type="hidden">
            <button class="btn btn-md btn-primary btn-right" id="download-summary-button" [disabled]="disableQueryButtons"
              type="submit">Download Summary</button>
          </form>
        </div>
      </div>

      <hr>

      <div class="row">
        <div class="col-6">
          <gpf-loading-spinner
            *ngIf="selectedGene"
            [loadingFinished]="familyLoadingFinished"
            [displayText]="'Loading variants...'"
            [count]="genotypePreviewVariantsArray?.getVariantsCount(maxFamilyVariants)">
          </gpf-loading-spinner>
        </div>
        <div class="col-6" *ngIf="selectedGene">
          <form id="family_download" (ngSubmit)="onSubmit($event)" action="{{ configService.baseUrl }}genotype_browser/query"
            method="post">
            <input name="queryData" type="hidden">
            <button class="btn btn-md btn-primary btn-right" id="download-button" [disabled]="disableQueryButtons"
              type="submit">Download</button>
          </form>
        </div>
      </div>

      <gpf-genotype-preview-table
        [columns]="selectedDataset?.genotypeBrowserConfig?.tableColumns"
        [genotypePreviewVariantsArray]="genotypePreviewVariantsArray"
        [legend]="legend">
      </gpf-genotype-preview-table>

    </div>
  </div>
</div>
