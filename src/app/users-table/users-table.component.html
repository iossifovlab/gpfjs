<div class="row">
  <div class="col-12 mt-3">
    <gpf-table [dataSource]="users">
      <gpf-table-column columnWidth="75px">
        <gpf-table-header caption="Name"></gpf-table-header>
        <gpf-table-content>
          <gpf-table-subcontent>
            <span *gpfTableCellContent="let user">{{ user.name }}</span>
          </gpf-table-subcontent>
        </gpf-table-content>
      </gpf-table-column>

      <gpf-table-column columnWidth="75px">
        <gpf-table-header caption="Email"></gpf-table-header>
        <gpf-table-content>
          <gpf-table-subcontent>
            <div *gpfTableCellContent="let user">
              <a [routerLink]="['/management/users', user.id]">{{ user.email }}</a>
            </div>
          </gpf-table-subcontent>
        </gpf-table-content>
      </gpf-table-column>

      <gpf-table-column columnWidth="75px">
        <gpf-table-header caption="Groups"></gpf-table-header>
        <gpf-table-content>
          <gpf-table-subcontent>
            <span *gpfTableCellContent="let user">
              <div *ngFor="let group of user.groups">
                <div>
                  <span>{{ group }}</span>
                  <gpf-small-remove-button
                    (clicked)="removeGroup(user, group)"
                    [hide]="isDefaultGroup(user, group) || (user.email === currentUserEmail && group === 'admin')"
                    message="Removing the group '{{ group }}' could change which usersets {{ user.name }} ({{ user.email }}) has access to."
                    confirmText="Remove group"
                    title="Remove group">
                  </gpf-small-remove-button>
                </div>
              </div>
            </span>
          </gpf-table-subcontent>
        </gpf-table-content>
      </gpf-table-column>

      <gpf-table-column columnWidth="50px">
        <gpf-table-header caption="Has password"></gpf-table-header>
        <gpf-table-content>
          <gpf-table-subcontent>
            <span *gpfTableCellContent="let user">
              <span *ngIf="user.hasPassword">
                <i class="fa fa-check" aria-hidden="true"></i>
              </span>
            </span>
          </gpf-table-subcontent>
        </gpf-table-content>
      </gpf-table-column>

      <gpf-table-column columnWidth="75px">
        <gpf-table-header caption="Allowed datasets"></gpf-table-header>
        <gpf-table-content>
          <gpf-table-subcontent>
            <div *gpfTableCellContent="let user" style="height: 150px; overflow: auto">
              <div *ngFor="let datasetId of user.allowedDatasets">{{ datasetId }}</div>
            </div>
          </gpf-table-subcontent>
        </gpf-table-content>
      </gpf-table-column>

      <gpf-table-column columnWidth="75px">
        <gpf-table-header caption="Actions"></gpf-table-header>
        <gpf-table-content>
          <gpf-table-subcontent>
            <span *gpfTableCellContent="let user" class="action-buttons">
              <gpf-users-actions [user]="user"></gpf-users-actions>
            </span>
          </gpf-table-subcontent>
        </gpf-table-content>
      </gpf-table-column>
    </gpf-table>
    <div *ngIf="users?.length === 0">Nothing found</div>
  </div>
</div>
