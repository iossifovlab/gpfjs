<div *ngIf="(userInfo$ | async)?.email as email" class="row justify-content-end dropdown">
  <div class="align-self-center">
    <span class="username-field">{{ email }}</span>
    <button class="btn btn-sm" id="logout-button" (click)="logout()">Logout</button>
  </div>
</div>

<div *ngIf="!(userInfo$ | async)?.email" class="row justify-content-end dropdown">
  <div>
    <button #dropdownButton (click)="hideDropdown = !hideDropdown; focusEmailInput()"
      class="btn btn-secondary dropdown-toggle" id="login-dropdown-toggle-button" type="button">
      Login
    </button>
    <div #dialog id="login-window" class="open row" [hidden]="hideDropdown">
      <form>
        <div class="row">
          <div class="col-12">

            <div class="form-group">
              <label for="username">Email</label>
              <input #emailInput name="username" id="username" class="form-control" [(ngModel)]="username" type="text">
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-12">
            <div class="form-group">
              <label for="password">Password</label>
              <input name="password" id="password" class="form-control" [(ngModel)]="password" type="password">
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-12">
            <button class="btn btn-primary" id="login-button" style="width: 100%" (click)="login()">
              Login
            </button>
          </div>
        </div>
        <div class="row mt-1 justify-content-center">
          <div style="margin-right: -15px; margin-left: -15px;" class="col-11">
              <button class="btn btn-sm btn-link" (click)="showRegister()">
                Register
              </button>
              <button class="btn btn-sm btn-link" (click)="showForgotPassword()">
                Forgotten password
              </button>
          </div>
        </div>
        <div *ngIf="loginError" class="row mt-1">
            <div class="col-12">
              <div class="alert alert-danger">
                Wrong username or password
              </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
