<ng-template #pedigree>
  <svg [attr.viewBox]="getViewBox()">
    <svg:line
      *ngFor="let straightLine of straightLines"
      [attr.x1]="straightLine.startX"
      [attr.y1]="straightLine.startY"
      [attr.x2]="straightLine.endX"
      [attr.y2]="straightLine.endY"
      stroke="black"
      stroke-width="1" />

    <svg:path
      *ngFor="let curveLine of curveLines"
      [attr.d]="curveLine.path"
      fill="none"
      stroke="black"
      stroke-width="1" />

    <svg:g
      gpf-pedigree-chart-member
      *ngFor="let pedigree of pedigreeDataWithLayout"
      [attr.transform]="
        'translate(' +
        pedigree.xUpperLeftCorner +
        ' ' +
        pedigree.yUpperLeftCorner +
        ') scale(' +
        pedigree.scaleFactor +
        ')'
      "
      [pedigreeData]="pedigree.individual.pedigreeData" />
  </svg>
</ng-template>

<ng-template #pedigreeModal let-modal>
  <div style="padding: 5px">
    <form
      (ngSubmit)="onSubmit($event)"
      action="{{ configService.baseUrl }}common_reports/family_counters/download"
      method="post">
      <input name="queryData" type="hidden" />
      <button class="btn btn-md btn-primary btn-right" id="download-button" type="button submit">
        <i class="fa fa-download fa-lg"></i>
      </button>
    </form>
  </div>
  <div class="svg-container" [style.width.px]="width * popoverScale">
    <ng-container *ngTemplateOutlet="pedigree"></ng-container>
  </div>
  <hr />
  <div class="family-panel">
    <div *ngIf="familyLists" style="padding: 5px; text-align: center">{{ familyLists | join: ', ' }}</div>
  </div>
</ng-template>

<div (click)="openModal(pedigreeModal)" class="svg-container" [style.width.px]="width * scale">
  <ng-container *ngTemplateOutlet="pedigree"></ng-container>
</div>
